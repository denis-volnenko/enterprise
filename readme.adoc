= Enterprise-приложения
:toc: Содержание

[cols="30,70"]
|===

|*Автор*
|Денис Волненко

|*Веб-сайт*
|https://www.volnenko.ru

|===

== 1. Требования к проектированию

=== 1.1. Требования к проектированию базы данных

==== Требования к именованию системных объектов в базе данных

* Физические названия таблиц должны быть lower_under_score.

* Физические названия полей должны быть lower_under_score.

* Физические названия таблиц должны иметь префикс с названием сервиса.

==== Требования к проектированию таблиц базы данных

* Все таблицы должны иметь кодировку UTF-8.

* Все текстовые поля таблицы должны иметь кодировку UTF-8.

* Все таблицы должны иметь комментарии (логическое название).

* Все поля должны иметь комметарии (логическое название).

* Все поля в таблицах с одинаковым назначением должны иметь одинаковые названия.

* Все поля в таблицах с одинаковыми названиями должны иметь одинаковый тип данных.

* Все таблицы должны иметь первичный ключ (поле id).

* Все таблицы должны иметь поле создания записи (created).

* Все таблицы должны иметь поле обновления записи (updated).

* Все таблицы могут иметь поле внешнего ключа записи (external_id).

* Все таблицы могут иметь поле версии записи (version).

* Все таблицы могут иметь поле удаления записи (is_deleted).

==== Список обязательных и опциональных полей таблицы базы данных

[cols="20,20,60"]
|===

|*Физ. название*
|*Лог. название*
|*Описание*

|id
|Идентификатор
|Первичный ключ таблицы

|external_id
|Внешний ключ
|Идентификатор записи во внешней системе.

|version
|Версия
|Оптимистичная блокировка

|is_deleted
|Флаг удаления
|Логическое удаление записи из таблицы базы данных.

|created
|Дата создания
|Дата создания записи в таблице базы данных.

|updated
|Дата обновления
|Дата обновления записи в таблице базы данных.

|===

=== 1.2. Требования к проектированию rest api

==== Классификация веб-ресурсов

* Одиночные объекты и массивы

* Плоские объекты и графы

* Чтение и запись данных

* Текстовые и бинарные данные

* Внутренний и внешний доступ

* Транспортные форматы данных

==== Требования к проектированию моделей данных rest api

* Дата и время должны передаваться в формате ISO-8601.

* Перечисления должные передаваться в текстовом формате.

==== Требования к проектированию ресурсов rest api

* Операции чтения данных должны выполняться с использованием метода GET.

* Операции записи данных должны выполняться с использованием методов POST, PUT, PATCH, DELETE.

* Операции чтения и записи данных проектируются исходя из нового или старого подхода для rest api.

=== Старый подход к проектированию rest api

[cols="0,20,20,20,20"]
|===

|№
|R/W
|CRUD
|HTTP
|SQL

|01.
|READ
|CREATE
|GET
|SELECT

|02.
|WRITE
|READ
|POST
|INSERT

|03.
|WRITE
|UPDATE
|POST
|UPDATE

|04.
|WRITE
|DELETE
|DELETE
|DELETE

|===


=== Новый подход к проектированию rest api

== 2. Требования к документированию

=== 2.1. Требования к документированию баз данных

* Требуется физическая ER-диаграмма базы данных.

* Требуется логическая ER-диаграмма базы данных.

* Требуется описание общих сведений о базе данных.

* Требуется описание всех таблиц базы данных.

* Требуется описание всех полей таблиц базы данных.

==== Требования к документированию таблиц базы данных

* Описание таблицы базы данных должно содержать физическое название.

* Описание таблицы базы данных должно содержать логическое название.

* Описание таблицы базы данных должно содержать название сервиса.

* Описание таблицы базы данных должно содержать название базы данных.

* Описание таблицы базы данных должно содержать название схемы.

* Описание таблицы базы данных должно содержать название СУБД.

==== Требования к документированию полей базы данных

* Описание поля таблицы базы данных должно содержать физическое название.

* Описание поля таблицы базы данных должно содержать логическое название.

* Описание поля таблицы базы данных должно содержать тип данных.

* Описание поля таблицы базы данных должно содержать значение по умолчанию (DEFAULT).

* Описание поля таблицы базы данных должно содержать признак первичного ключа (PK).

* Описание поля таблицы базы данных должно содержать признак внешнего ключа (FK).

* Описание поля таблицы базы данных должно содержать признак уникальности (UK).

* Описание поля таблицы базы данных должно содержать признак не null-значения (NN).

* Описание поля таблицы базы данных должно содержать признак наличия счетчика (AI).

==== Шаблон описания таблиц базы данных

*Основные сокращения*

[cols="0,10,90"]
|===

^|*№*
^|--
|*Название*

^|01.
^|PK
|Primary Key

^|02.
^|FK
|Foreign Key

^|03.
^|UK
|Unique Key

^|04.
^|AI
|Auto Increment

^|05.
^|NN
|Not Null

|===

*Общие сведения*

[cols="30,70"]
|===

|*Физ. название*
|tm_task

|*Лог. название*
|Задача

|*Сервис*
|task-manager

|*База данных*
|tm

|*Схема*
|public

|*СУБД*
|Postgress 15

|===

*Описание полей*

[cols="0,10,10,5,5,5,5,5,5,5"]
|===

^|*№*
|*Физ. название*
|*Лог. название*
|*Тип данных*
^|*PK*
^|*FK*
^|*UK*
^|*AI*
^|*NN*
|*DEFAULT*

^|01.
|id
|Идентификатор
|uuid
^|✓
^|--
^|--
^|--
^|✓
|

^|02.
|external_id
|Внешний идентификатор
|varchar(255)
^|--
^|--
^|--
^|--
^|--
|

^|03.
|name
|Название
|varchar(255)
^|--
^|--
^|✓
^|--
^|✓
|

^|04.
|description
|Описание
|text
^|--
^|--
^|--
^|--
^|✓
|

^|05.
|version
|Версия
|integer
^|--
^|--
^|--
^|--
^|✓
|0

^|07.
|is_deleted
|Флаг удаления
|bool
^|--
^|--
^|--
^|--
^|✓
|false

^|08.
|created
|Дата создания
|timestampz
^|--
^|--
^|--
^|--
^|✓
|

^|09.
|updated
|Дата обновления
|timestampz
^|--
^|--
^|--
^|--
^|--
|

^|10.
|deleted
|Дата удаления
|timestampz
^|--
^|--
^|--
^|--
^|--
|

|===

=== 2.2. Требования к документированию rest api

* Требуется описание общих сведений о rest api.

* Требуется описание всех моделей данных rest api.

* Требуется описание всех ресурсов rest api.

=== 2.3. Требования к пакету проектной документации

[cols="0,100"]
|===

^|*№*
|*Наименование*

^|01.
|Техническое задание

^|02. 
|Технический проект

^|03.
|Архитектурный документ

^|04.
|План тестирования

|===

== 3. Приложения 

=== 3.1. Справочник полей предметной области

[cols="20,20,20,20,20"]
|===

|*Физ. название*
|*Лог. название*
|*Тип*
|*JSON*
|*СУБД*

|id
|Идентификатор
|Строка
|string
|uuid

|name
|Название
|Строка
|string
|varchar(255)

|title
|Заголовок
|Строка
|string
|varchar(255)

|description
|Описание
|Строка
|string
|text

|created
|Дата создания
|Дата/Время
|string
|timestamptz

|updated
|Дата обновления
|Дата/Время
|string
|timestamptz

|deleted
|Дата удаления
|Дата/Время
|string
|timestamptz

|version
|Версия
|Целое число
|number
|integer

|login
|Логин
|Строка
|string
|varchar(255)

|username
|Имя пользователя
|Строка
|string
|varchar(255)

|password
|Пароль
|Строка
|string
|varchar(255)

|===
